{"ast":null,"code":"var _jsxFileName = \"/Users/syedasultana/Development/restaurants-app/restaurants-front/src/Components/BookTable.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport DatePicker from './DatePicker';\nimport TimePicker from './TimePicker';\nimport TableBooking from './TableBooking';\nimport axios from \"axios\";\nimport { useParams } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction BookTable({\n  loggedIn,\n  loginData\n}) {\n  _s();\n\n  const [chosenDate, setChosenDate] = React.useState();\n  const [chosenTime, setChosenTime] = React.useState();\n  const [seatingNo, setSeatingNo] = React.useState();\n  const [existingBookings, setExistingBookings] = React.useState([]); //for user\n\n  const [allBookings, setAllBookings] = React.useState([]); //for admin\n\n  if (loggedIn) {\n    console.log('is admin: ', loginData.admin);\n\n    if (loginData.admin != undefined || loginData.admin) {\n      //axios request\n      axios.get(`http://localhost:3100/bookings`).then(response => {\n        console.log(response);\n        setAllBookings(response.data);\n      }).catch(err => {\n        console.log(err);\n      });\n\n      if (allBookings != '') {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            class: \"heading\",\n            children: \"Table Bookings Admin View\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 34,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: allBookings.map((booking, index) => /*#__PURE__*/_jsxDEV(TableBooking, {\n              bookingInfo: booking\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 36,\n              columnNumber: 15\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 35,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 33,\n          columnNumber: 11\n        }, this);\n      } else {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            class: \"heading\",\n            children: \"Table Bookings Admin View\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 44,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"No table bookings exist\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 11\n        }, this);\n      }\n    } else {\n      //IF BOOKINGS ALREADY EXIST THEN DISPLAY THEM HERE, USING TERNARY OPERATOR\n      //do the axios call, if found then populate existingBookings \n      //use ternary operator to display bookings by checking if existingBookings is a populated or empty array\n      //getUsersBookings(setExistingBookings, loginData.user_id);\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          class: \"heading\",\n          children: \"Book Table\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"Form\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Select a date:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 60,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(DatePicker, {\n              chosenDate: chosenDate,\n              setChosenDate: setChosenDate\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 62,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Select a time:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TimePicker, {\n              chosenTime: chosenTime,\n              setChosenTime: setChosenTime\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Enter your seating number:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              placeholder: \"e.g 5\",\n              onChange: event => {\n                setSeatingNo(event.target.value);\n              },\n              value: seatingNo\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              handleSubmit(chosenDate, chosenTime, seatingNo, loginData.user_id, setChosenDate, setChosenTime, setSeatingNo);\n            },\n            children: \"BOOK\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this);\n    }\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Please log in to book a table\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this);\n  }\n}\n\n_s(BookTable, \"Mi9K5syPK94Li8TKMr741cOf/FE=\");\n\n_c = BookTable;\n\nasync function getUsersBookings(setExistingBookings, user_id) {\n  const response = await axios.get(`http://localhost:3100/user-bookings/`, {\n    params: {\n      user_id: user_id\n    }\n  }).then(response => {\n    console.log(response);\n    setExistingBookings(response.data);\n  });\n}\n\nasync function handleSubmit(chosenDate, chosenTime, seatingNo, userId, setChosenDate, setChosenTime, setSeatingNo) {\n  //console.log('POST Request', chosenDate, chosenTime, seatingNo, userId);\n  const response = await axios.post(`http://localhost:3100/booking?user_id=${userId}&date=${chosenDate}&time=${chosenTime}&seating_no=${seatingNo}`).then(response => {\n    console.log(response); //reset form\n\n    setChosenDate('no date');\n    setChosenTime('no time');\n    setSeatingNo(undefined);\n  }).catch(err => {\n    console.log(err);\n  });\n}\n\nexport default BookTable;\n\nvar _c;\n\n$RefreshReg$(_c, \"BookTable\");","map":{"version":3,"sources":["/Users/syedasultana/Development/restaurants-app/restaurants-front/src/Components/BookTable.js"],"names":["React","DatePicker","TimePicker","TableBooking","axios","useParams","BookTable","loggedIn","loginData","chosenDate","setChosenDate","useState","chosenTime","setChosenTime","seatingNo","setSeatingNo","existingBookings","setExistingBookings","allBookings","setAllBookings","console","log","admin","undefined","get","then","response","data","catch","err","map","booking","index","event","target","value","handleSubmit","user_id","getUsersBookings","params","userId","post"],"mappings":"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","sourcesContent":["import React from 'react';\nimport DatePicker from './DatePicker';\nimport TimePicker from './TimePicker';\nimport TableBooking from './TableBooking';\nimport axios from \"axios\";\nimport { useParams } from 'react-router-dom';\n\nfunction BookTable({ loggedIn, loginData }) {\n  const [chosenDate, setChosenDate] = React.useState();\n  const [chosenTime, setChosenTime] = React.useState();\n  const [seatingNo, setSeatingNo] = React.useState();\n  const [existingBookings, setExistingBookings] = React.useState([]); //for user\n  const [allBookings, setAllBookings] = React.useState([]); //for admin\n\n  if (loggedIn) {\n    console.log('is admin: ', loginData.admin)\n    if (loginData.admin != undefined || loginData.admin) {\n      //axios request\n      axios\n        .get(\n            `http://localhost:3100/bookings`, \n        )\n        .then(response => {\n            console.log(response)\n            setAllBookings(response.data);\n        })\n        .catch(err => {\n            console.log(err)\n        });\n      \n      if (allBookings != '') {\n        return (\n          <div>\n            <h2 class=\"heading\">Table Bookings Admin View</h2>\n            <div>{allBookings.map((booking, index) => (\n              <TableBooking bookingInfo={booking}/>\n            ))}\n            </div>\n          </div>\n        )\n      } else {\n        return (\n          <div>\n            <h2 class=\"heading\">Table Bookings Admin View</h2>\n            <h3>No table bookings exist</h3>\n          </div>\n        )\n      }\n    } else {\n    //IF BOOKINGS ALREADY EXIST THEN DISPLAY THEM HERE, USING TERNARY OPERATOR\n    //do the axios call, if found then populate existingBookings \n    //use ternary operator to display bookings by checking if existingBookings is a populated or empty array\n    //getUsersBookings(setExistingBookings, loginData.user_id);\n      return (\n        <div>\n            <h2 class=\"heading\">Book Table</h2>\n\n            <div class=\"Form\">\n              <div>\n                <p>Select a date:</p>\n                <br />\n                <DatePicker chosenDate={chosenDate} setChosenDate={setChosenDate}/>\n              </div>\n              <br />\n              <div>\n                <p>Select a time:</p>\n                <br />\n                <TimePicker chosenTime={chosenTime} setChosenTime={setChosenTime}/>\n              </div>\n              <br />\n              <div>\n                <p>Enter your seating number:</p>\n                <input \n                  placeholder=\"e.g 5\"\n                  onChange={(event) => {\n                    setSeatingNo(event.target.value);\n                  }}\n                  value={seatingNo}\n                />\n                <br />\n              </div>\n              <br />\n              <button\n                onClick={() => {\n                  handleSubmit(chosenDate, chosenTime, seatingNo, loginData.user_id, setChosenDate, setChosenTime, setSeatingNo);\n                }}\n                >BOOK\n              </button> \n            </div>\n\n\n        </div>\n      );\n    } \n  } else {\n    return (\n      <div>\n        <h3>Please log in to book a table</h3>\n      </div>\n    )\n  }\n}\n\nasync function getUsersBookings(setExistingBookings, user_id) {\n  const response = await axios\n    .get(\n        `http://localhost:3100/user-bookings/`, {\n            params: {\n                user_id: user_id\n            }\n        }\n    )\n    .then(response => {\n        console.log(response)\n        setExistingBookings(response.data);\n    });\n}\n\n\n\n\nasync function handleSubmit(chosenDate, chosenTime, seatingNo, userId, setChosenDate, setChosenTime, setSeatingNo) {\n  //console.log('POST Request', chosenDate, chosenTime, seatingNo, userId);\n\n  const response = await axios\n    .post(\n        `http://localhost:3100/booking?user_id=${userId}&date=${chosenDate}&time=${chosenTime}&seating_no=${seatingNo}`, \n    )\n    .then(response => {\n      console.log(response);\n      //reset form\n      setChosenDate('no date');\n      setChosenTime('no time');\n      setSeatingNo(undefined);\n    })\n    .catch(err => {\n        console.log(err)\n    });\n\n}\n\nexport default BookTable;"]},"metadata":{},"sourceType":"module"}