{"ast":null,"code":"var _jsxFileName = \"/Users/syedasultana/Development/restaurants-app/restaurants-front/src/Components/Login.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport Modal from './Modal';\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Login({\n  loggedIn,\n  setLoggedIn\n}) {\n  _s();\n\n  const [loginData, setLoginData] = React.useState();\n  const [emailInput, setEmailInput] = React.useState();\n  const [passwordInput, setPasswordInput] = React.useState();\n  const [usersData, setUsersData] = React.useState();\n  const [showModal, setShowModal] = React.useState(false);\n  const [modalMessage, setModalMessage] = React.useState();\n\n  if (loggedIn) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Logged in as \", loginData.first_name, \" \", loginData.last_name, \" | \", loginData.email]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 16,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        children: \"Log out\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 17,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 15,\n      columnNumber: 13\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Login form\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 23,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"form\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          placeholder: \"email address\",\n          onChange: event => {\n            setEmailInput(event.target.value);\n          },\n          value: emailInput\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 25,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          placeholder: \"password\",\n          onChange: event => {\n            setPasswordInput(event.target.value);\n          },\n          value: passwordInput\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: async () => {\n            console.log('email: ', emailInput); //do axios request to validate user\n\n            axios.get(`http://localhost:3100/users`).then(response => {\n              console.log(response);\n              setUsersData(response.data);\n\n              if (findCredentials(response.data, emailInput, passwordInput) !== '') {\n                let index = findCredentials(response.data, emailInput, passwordInput);\n                console.log('credentials exist, index: ' + index);\n                let credentialsObj = {};\n                credentialsObj.email = emailInput;\n                credentialsObj.first_name = response.data[index].first_name;\n                credentialsObj.last_name = response.data[index].last_name;\n                setLoginData(credentialsObj); //console.log('credentialsObj ', credentialsObj);\n\n                setLoggedIn(true);\n              } else {\n                console.log('credentials DO NOT exist');\n                setModalMessage('Invalid credentials');\n                setShowModal(true);\n              }\n            }).catch(err => {\n              console.log(err);\n            });\n          },\n          children: \"Log in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Modal, {\n          toggle: showModal,\n          message: modalMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 13\n    }, this);\n  }\n}\n\n_s(Login, \"6aXmdgay0jiveMYT8EIiX9Wn+gc=\");\n\n_c = Login;\n\nfunction findCredentials(data, emailInput, passwordInput) {\n  let result = data.map(datum => matchedCredentials(datum, emailInput, passwordInput));\n\n  if (result.includes(true)) {\n    let index = result.indexOf(true);\n    return index;\n  } else {\n    return '';\n  }\n}\n\nfunction matchedCredentials(datum, emailInput, passwordInput) {\n  if (datum.email === emailInput && datum.password === passwordInput) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/Users/syedasultana/Development/restaurants-app/restaurants-front/src/Components/Login.js"],"names":["React","Modal","axios","Login","loggedIn","setLoggedIn","loginData","setLoginData","useState","emailInput","setEmailInput","passwordInput","setPasswordInput","usersData","setUsersData","showModal","setShowModal","modalMessage","setModalMessage","first_name","last_name","email","event","target","value","console","log","get","then","response","data","findCredentials","index","credentialsObj","catch","err","result","map","datum","matchedCredentials","includes","indexOf","password"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Modal from './Modal';\nimport axios from \"axios\";\n\nfunction Login({ loggedIn, setLoggedIn }) {\n    const [loginData, setLoginData] = React.useState();\n    const [emailInput, setEmailInput] = React.useState();\n    const [passwordInput, setPasswordInput] = React.useState();\n    const [usersData, setUsersData] = React.useState();\n    const [showModal, setShowModal] = React.useState(false);\n    const [modalMessage, setModalMessage] = React.useState();\n    \n    if (loggedIn) {\n        return (\n            <div>\n                <h3>Logged in as {loginData.first_name} {loginData.last_name} | {loginData.email}</h3>\n                <button>Log out</button>\n            </div>\n        )\n    } else {\n        return (\n            <div>\n                <h3>Login form</h3>\n                <div class=\"form\">\n                    <input \n                        placeholder=\"email address\"\n                        onChange={(event) => {\n                            setEmailInput(event.target.value);\n                        }}\n                        \n                        value={emailInput}\n                    />\n\n                    <input \n                        placeholder=\"password\"\n                        onChange={(event) => {\n                            setPasswordInput(event.target.value);\n                        }}\n                        \n                        value={passwordInput}\n                    />\n\n                    <button\n                        onClick={async () => {\n                            console.log('email: ', emailInput);\n                            //do axios request to validate user\n                            axios\n                            .get(\n                                `http://localhost:3100/users`, \n                            )\n                            .then(response => {\n                                console.log(response)\n                                setUsersData(response.data);\n                                if (findCredentials(response.data, emailInput, passwordInput) !== '') {\n                                    let index = findCredentials(response.data, emailInput, passwordInput);\n                                    console.log('credentials exist, index: ' + index);\n                                    let credentialsObj = {};\n                                    credentialsObj.email = emailInput;\n                                    credentialsObj.first_name = response.data[index].first_name;\n                                    credentialsObj.last_name = response.data[index].last_name;\n                                    setLoginData(credentialsObj);//console.log('credentialsObj ', credentialsObj);\n                                    setLoggedIn(true);\n                                } else {\n                                    console.log('credentials DO NOT exist');\n                                    setModalMessage('Invalid credentials');\n                                    setShowModal(true);\n                                }\n                            })\n                            .catch(err => {\n                                console.log(err)\n                            });\n                        }}\n                        >Log in\n                    </button>\n                    <Modal toggle={showModal} message={modalMessage} />\n                </div>\n            </div>\n        ); \n    }\n    \n   \n}\n\nfunction findCredentials(data, emailInput, passwordInput) {\n    let result = data.map(datum => matchedCredentials(datum, emailInput, passwordInput));\n    if (result.includes(true)) {\n        let index = result.indexOf(true);\n        return index;\n    } else {\n        return '';\n    }\n}\n\nfunction matchedCredentials(datum, emailInput, passwordInput) {\n    if (datum.email === emailInput && datum.password === passwordInput) {\n        return true;\n    } else {\n        return false;\n    }\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}