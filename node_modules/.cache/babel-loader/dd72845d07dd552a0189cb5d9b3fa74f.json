{"ast":null,"code":"var _jsxFileName = \"/Users/syedasultana/Development/restaurants-app/restaurants-front/src/Components/Login.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport Modal from './Modal';\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Login({\n  loggedIn,\n  setLoggedIn\n}) {\n  _s();\n\n  const [loginData, setLoginData] = React.useState();\n  const [emailInput, setEmailInput] = React.useState();\n  const [passwordInput, setPasswordInput] = React.useState();\n  const [usersData, setUsersData] = React.useState();\n\n  if (loggedIn) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Logged in as \", loginData.first_name, \" \", loginData.last_name, \" | \", loginData.email]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 14,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        children: \"Log out\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 15,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 13,\n      columnNumber: 13\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Login form\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 21,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"form\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          placeholder: \"email address\",\n          onChange: event => {\n            setEmailInput(event.target.value);\n          },\n          value: emailInput\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 23,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          placeholder: \"password\",\n          onChange: event => {\n            setPasswordInput(event.target.value);\n          },\n          value: passwordInput\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 32,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: async () => {\n            console.log('email: ', emailInput); //do axios request to validate user\n\n            axios.get(`http://localhost:3100/users`).then(response => {\n              console.log(response);\n              setUsersData(response.data);\n\n              if (findCredentials(response.data, emailInput, passwordInput) !== '') {\n                let index = findCredentials(response.data, emailInput, passwordInput);\n                console.log('credentials exist, index: ' + index);\n                let credentialsObj = {};\n                credentialsObj.email = emailInput;\n                credentialsObj.first_name = response.data[index].first_name;\n                credentialsObj.last_name = response.data[index].last_name;\n                setLoginData(credentialsObj); //console.log('credentialsObj ', credentialsObj);\n\n                setLoggedIn(true);\n              } else {\n                console.log('credentials DO NOT exist');\n              }\n            }).catch(err => {\n              console.log(err);\n            }); //if correct then set the LoginData and set Loggedin to True and the display will change\n            //else show modal saying this is incorrect\n          },\n          children: \"Log in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 22,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 20,\n      columnNumber: 13\n    }, this);\n  }\n}\n\n_s(Login, \"/72oNzzkeiXSc78zl02DzdE++GA=\");\n\n_c = Login;\n\nfunction findCredentials(data, emailInput, passwordInput) {\n  let result = data.map(datum => matchedCredentials(datum, emailInput, passwordInput)); //console.log('result', result);\n\n  if (result.includes(true)) {\n    let index = result.indexOf(true);\n    return index;\n  } else {\n    return '';\n  }\n}\n\nfunction matchedCredentials(datum, emailInput, passwordInput) {\n  if (datum.email === emailInput && datum.password === passwordInput) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/Users/syedasultana/Development/restaurants-app/restaurants-front/src/Components/Login.js"],"names":["React","Modal","axios","Login","loggedIn","setLoggedIn","loginData","setLoginData","useState","emailInput","setEmailInput","passwordInput","setPasswordInput","usersData","setUsersData","first_name","last_name","email","event","target","value","console","log","get","then","response","data","findCredentials","index","credentialsObj","catch","err","result","map","datum","matchedCredentials","includes","indexOf","password"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Modal from './Modal';\nimport axios from \"axios\";\n\nfunction Login({ loggedIn, setLoggedIn }) {\n    const [loginData, setLoginData] = React.useState();\n    const [emailInput, setEmailInput] = React.useState();\n    const [passwordInput, setPasswordInput] = React.useState();\n    const [usersData, setUsersData] = React.useState();\n    \n    if (loggedIn) {\n        return (\n            <div>\n                <h3>Logged in as {loginData.first_name} {loginData.last_name} | {loginData.email}</h3>\n                <button>Log out</button>\n            </div>\n        )\n    } else {\n        return (\n            <div>\n                <h3>Login form</h3>\n                <div class=\"form\">\n                    <input \n                        placeholder=\"email address\"\n                        onChange={(event) => {\n                            setEmailInput(event.target.value);\n                        }}\n                        \n                        value={emailInput}\n                    />\n\n                    <input \n                        placeholder=\"password\"\n                        onChange={(event) => {\n                            setPasswordInput(event.target.value);\n                        }}\n                        \n                        value={passwordInput}\n                    />\n\n                    <button\n                        onClick={async () => {\n                            console.log('email: ', emailInput);\n                            //do axios request to validate user\n                            axios\n                            .get(\n                                `http://localhost:3100/users`, \n                            )\n                            .then(response => {\n                                console.log(response)\n                                setUsersData(response.data);\n                                if (findCredentials(response.data, emailInput, passwordInput) !== '') {\n                                    let index = findCredentials(response.data, emailInput, passwordInput);\n                                    console.log('credentials exist, index: ' + index);\n                                    let credentialsObj = {};\n                                    credentialsObj.email = emailInput;\n                                    credentialsObj.first_name = response.data[index].first_name;\n                                    credentialsObj.last_name = response.data[index].last_name;\n                                    setLoginData(credentialsObj);//console.log('credentialsObj ', credentialsObj);\n                                    setLoggedIn(true);\n                                } else {\n                                    console.log('credentials DO NOT exist');\n                                }\n                            })\n                            .catch(err => {\n                                console.log(err)\n                            });\n                            //if correct then set the LoginData and set Loggedin to True and the display will change\n                            //else show modal saying this is incorrect\n                        }}\n                        >Log in\n                    </button>\n                </div>\n            </div>\n        ); \n    }\n    \n   \n}\n\nfunction findCredentials(data, emailInput, passwordInput) {\n    let result = data.map(datum => matchedCredentials(datum, emailInput, passwordInput));\n    //console.log('result', result);\n    if (result.includes(true)) {\n        let index = result.indexOf(true);\n        return index;\n    } else {\n        return '';\n    }\n}\n\nfunction matchedCredentials(datum, emailInput, passwordInput) {\n    if (datum.email === emailInput && datum.password === passwordInput) {\n        return true;\n    } else {\n        return false;\n    }\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}