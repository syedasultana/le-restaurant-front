{"ast":null,"code":"var _jsxFileName = \"/Users/syedasultana/Development/restaurants-app/restaurants-front/src/Components/BookTable.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport DatePicker from './DatePicker';\nimport TimePicker from './TimePicker';\nimport axios from \"axios\";\nimport { useParams } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction BookTable({\n  loggedIn,\n  loginData\n}) {\n  _s();\n\n  const [chosenDate, setChosenDate] = React.useState();\n  const [chosenTime, setChosenTime] = React.useState();\n  const [seatingNo, setSeatingNo] = React.useState();\n  const [existingBookings, setExistingBookings] = React.useState([]);\n  React.useEffect(() => {\n    axios.get(`http://localhost:3100/booking/`, {\n      params: {\n        user_id: loginData.user_id\n      }\n    }).then(response => {\n      console.log(response);\n      setExistingBookings(response.data);\n    });\n  }, [setExistingBookings]);\n\n  if (loggedIn) {\n    //IF BOOKINGS ALREADY EXIST THEN DISPLAY THEM HERE, USING TERNARY OPERATOR\n    //do the axios call, if found then populate existingBookings \n    //use ternary operator to display bookings by checking if existingBookings is a populated or empty array\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Book Table\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"Form\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Select a date:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 40,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 41,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(DatePicker, {\n            chosenDate: chosenDate,\n            setChosenDate: setChosenDate\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 42,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Select a time:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 46,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(TimePicker, {\n            chosenTime: chosenTime,\n            setChosenTime: setChosenTime\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 48,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Enter your seating number:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: \"e.g 5\",\n            onChange: event => {\n              setSeatingNo(event.target.value);\n            },\n            value: seatingNo\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            handleSubmit(chosenDate, chosenTime, seatingNo, loginData.user_id, setChosenDate, setChosenTime, setSeatingNo);\n          },\n          children: \"BOOK\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Please log in to book a table\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this);\n  }\n}\n\n_s(BookTable, \"nru7BQgyhXcrftLpWAxoZ5PajXI=\");\n\n_c = BookTable;\n\nasync function handleSubmit(chosenDate, chosenTime, seatingNo, userId, setChosenDate, setChosenTime, setSeatingNo) {\n  //console.log('POST Request', chosenDate, chosenTime, seatingNo, userId);\n  const response = await axios.post(`http://localhost:3100/booking?user_id=${userId}&date=${chosenDate}&time=${chosenTime}&seating_no=${seatingNo}`).then(response => {\n    console.log(response); //reset form\n\n    setChosenDate('no date');\n    setChosenTime('no time');\n    setSeatingNo(undefined);\n  }).catch(err => {\n    console.log(err);\n  });\n}\n\nexport default BookTable;\n\nvar _c;\n\n$RefreshReg$(_c, \"BookTable\");","map":{"version":3,"sources":["/Users/syedasultana/Development/restaurants-app/restaurants-front/src/Components/BookTable.js"],"names":["React","DatePicker","TimePicker","axios","useParams","BookTable","loggedIn","loginData","chosenDate","setChosenDate","useState","chosenTime","setChosenTime","seatingNo","setSeatingNo","existingBookings","setExistingBookings","useEffect","get","params","user_id","then","response","console","log","data","event","target","value","handleSubmit","userId","post","undefined","catch","err"],"mappings":"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","sourcesContent":["import React from 'react';\nimport DatePicker from './DatePicker';\nimport TimePicker from './TimePicker';\nimport axios from \"axios\";\nimport { useParams } from 'react-router-dom';\n\nfunction BookTable({ loggedIn, loginData }) {\n  const [chosenDate, setChosenDate] = React.useState();\n  const [chosenTime, setChosenTime] = React.useState();\n  const [seatingNo, setSeatingNo] = React.useState();\n  const [existingBookings, setExistingBookings] = React.useState([]);\n\n  React.useEffect(() => {\n    axios\n        .get(\n            `http://localhost:3100/booking/`, {\n                params: {\n                    user_id: loginData.user_id\n                }\n            }\n        )\n        .then(response => {\n            console.log(response)\n            setExistingBookings(response.data);\n        });\n  }, [setExistingBookings])   \n\n  if (loggedIn) {\n    //IF BOOKINGS ALREADY EXIST THEN DISPLAY THEM HERE, USING TERNARY OPERATOR\n    //do the axios call, if found then populate existingBookings \n    //use ternary operator to display bookings by checking if existingBookings is a populated or empty array\n     \n\n    return (\n      <div>\n          <h2>Book Table</h2>\n\n          <div class=\"Form\">\n            <div>\n              <p>Select a date:</p>\n              <br />\n              <DatePicker chosenDate={chosenDate} setChosenDate={setChosenDate}/>\n            </div>\n            <br />\n            <div>\n              <p>Select a time:</p>\n              <br />\n              <TimePicker chosenTime={chosenTime} setChosenTime={setChosenTime}/>\n            </div>\n            <br />\n            <div>\n              <p>Enter your seating number:</p>\n              <input \n                placeholder=\"e.g 5\"\n                onChange={(event) => {\n                  setSeatingNo(event.target.value);\n                }}\n                value={seatingNo}\n              />\n              <br />\n            </div>\n            <br />\n            <button\n              onClick={() => {\n                handleSubmit(chosenDate, chosenTime, seatingNo, loginData.user_id, setChosenDate, setChosenTime, setSeatingNo);\n              }}\n              >BOOK\n            </button> \n          </div>\n\n\n      </div>\n    ); \n  } else {\n    return (\n      <div>\n        <h3>Please log in to book a table</h3>\n      </div>\n    )\n  }\n}\n\n\n\n\n\nasync function handleSubmit(chosenDate, chosenTime, seatingNo, userId, setChosenDate, setChosenTime, setSeatingNo) {\n  //console.log('POST Request', chosenDate, chosenTime, seatingNo, userId);\n\n  const response = await axios\n  .post(\n      `http://localhost:3100/booking?user_id=${userId}&date=${chosenDate}&time=${chosenTime}&seating_no=${seatingNo}`, \n  )\n  .then(response => {\n    console.log(response);\n    //reset form\n    setChosenDate('no date');\n    setChosenTime('no time');\n    setSeatingNo(undefined);\n  })\n  .catch(err => {\n      console.log(err)\n  });\n\n}\n\nexport default BookTable;"]},"metadata":{},"sourceType":"module"}